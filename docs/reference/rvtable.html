<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Construct A Random Variable Table — rvtable â€¢ rvtable</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rvtable</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rvtable.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leonawicz/rvtable">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Construct A Random Variable Table</h1>
    </div>

    
    <p>Class constructor for <code>rvtable</code> objects.</p>
    

    <pre class="usage"><span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>Val</span>, <span class='no'>Prob</span>, <span class='kw'>discrete</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>density.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>force.dist</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a numeric vector or data frame.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>an optional vector of probabilities associated with <code>x</code> when <code>x</code> is a numeric vector with no similar probabilities vector attribute.</p></td>
    </tr>
    <tr>
      <th>Val</th>
      <td><p>the column name of <code>x</code> referring to random variable values when <code>x</code> is a data frame.</p></td>
    </tr>
    <tr>
      <th>Prob</th>
      <td><p>the column name of <code>x</code> referring to random variable values when <code>x</code> is a data frame.</p></td>
    </tr>
    <tr>
      <th>discrete</th>
      <td><p>whether the random variable is discrete.</p></td>
    </tr>
    <tr>
      <th>density.args</th>
      <td><p>optional arguments passed to <code>density</code>.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p><code>NULL</code> or a list of weights associated with levels of ID variables in `x`. See details.</p></td>
    </tr>
    <tr>
      <th>force.dist</th>
      <td><p>logical, force distribution-type rvtable output if <code>Prob</code> is missing, i.e., <code>Val</code> is assumed to be a sample.
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <code>rvtable</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These are long format data tables containing a Val and Prob column describing the distribution of a random variable.
Any other columns are ID columns and should be categorical variables. The random variable described by Val and Prob may be discrete or continuous.
When discrete, probabilities are true probabilities.
When continuous, Val and Prob are based on <code>x</code> and <code>y</code> output from <code>density</code> and describe a distribution curve,
and therefore values in Prob may be greater than one and may not sum to one.
Val is typically numeric but may be character when discrete such as when an rvtable object is returned from <code>inverse_pmf</code>.</p>
<p>For data frame inputs, Val and Prob here refer generally to whatever columns in an rvtable are specified by <code>Val</code> and <code>Prob</code>.
In <code>rvtable</code>, if the <code>Val</code> argument is not supplied, Val is assumed to be <code>Val="Val"</code> and <code>rvtable</code>
will search the names of a data frame for this column, throwing an error if it is not found, like with any other value of <code>Val</code>.
When <code>Prob</code> is missing, however, this is analogous to when <code>x</code> is numeric and
<code>y</code> and <code>x</code> probability attributes are both NULL: the data in the <code>Val</code> column are assumed to be a direct sample
from a distribution rather than a vector of values that describes a distribution in conjunction with a <code>Prob</code> column.
When <code>x</code> is numeric, a supplied <code>Val</code> will substitute for rvtable names <code>x</code> and <code>y</code> in the output, respectively.</p>
<p>All rvtable objects are in one of two forms: distribution-type or sample-type.
This primary constructor constructs distribution- or sample-type rvtable objects,
with the corresponding attribute <code>tabletype="distribution"</code> or <code>tabletype="sample"</code>.
Sampling on an rvtable can generate a sample-type rvtable, with the attribute <code>tabletype="sample"</code>.
Other operations like merging or marginalizing distributions typically yield rvtables in distribution form.
This is the common form and rvtables are usually kept in this form until a final step in a processing chain
where samples are needed.</p>
<p>Every rvtable object also has a variable type attribute, <code>rvtype</code>, which is either "discrete" or "continuous".
Other attributes assigned during rvtable construction include <code>valcol</code> and <code>probcol</code>, the names of the Val and Prob columns,
and a <code>density.args</code> attribute that lists any most recent arguments passed to <code>density</code> in the process
of making the rvtable.</p>
<p>If an rvtable is already of class <code>rvtable</code>, the <code>rvtable</code> function simply returns
the rvtable as is; any other arguments passed to <code>rvtable</code> are ignored and
neither the table nor its attributes are updated or altered in any way.</p>
<p>Weights for levels of an ID variable are can be set by <code>set_weights</code>.
In <code>rvtable</code>, <code>weights</code> is passed to <code>set_weights</code> so that weights can be set on rvtable construction if desired.
It can be relatively cumbersome to set weights for all ID variables at once in a call to <code>rvtable</code>, and
particularly wasteful if there are several ID columns and most or all have levels with equal weights.
The weights attribute assigned to the rvtable will be an empty list
if there are no ID columns in <code>x</code> and a named list of data frames otherwise.
The names are the names of the ID variables in <code>x</code> and each data frame has two columns: <code>levels</code> and <code>weights</code>,
giving the weighting of an ID variable's levels.
When <code>weights=NULL</code> or <code>weights=list()</code>, the values in the <code>weights</code> column for each level in each data frame
are set to <code>1</code> for equal weighting.
Similarly, individual named list elements can be set to <code>NULL</code> for convenience instead of passing a data frame.
<code>NULL</code> or <code>list()</code> elements in the <code>weights</code> list are converted to data frames with weights equal to one.
Note that <code>weights</code> is ignored if <code>x</code> is not a data frame.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># basic samples from continuous and discrete RVs</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>rnorm</span>(<span class='fl'>100</span>)
<span class='fu'>rvtable</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; # A tibble: 512 x 2
#&gt;            x            y
#&gt;        &lt;dbl&gt;        &lt;dbl&gt;
#&gt;  1 -3.454880 0.0002131446
#&gt;  2 -3.438980 0.0002396017
#&gt;  3 -3.423080 0.0002688230
#&gt;  4 -3.407179 0.0003023149
#&gt;  5 -3.391279 0.0003388508
#&gt;  6 -3.375379 0.0003785400
#&gt;  7 -3.359479 0.0004238740
#&gt;  8 -3.343578 0.0004736674
#&gt;  9 -3.327678 0.0005276445
#&gt; 10 -3.311778 0.0005875779
#&gt; # ... with 502 more rows</div><div class='input'><span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>density.args</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>n</span><span class='kw'>=</span><span class='fl'>50</span>, <span class='kw'>adjust</span><span class='kw'>=</span><span class='fl'>2</span>))</div><div class='output co'>#&gt; # A tibble: 50 x 2
#&gt;            x            y
#&gt;        &lt;dbl&gt;        &lt;dbl&gt;
#&gt;  1 -4.733530 0.0001913517
#&gt;  2 -4.515523 0.0004282042
#&gt;  3 -4.297516 0.0009063360
#&gt;  4 -4.079509 0.0018112319
#&gt;  5 -3.861502 0.0034216676
#&gt;  6 -3.643496 0.0061365053
#&gt;  7 -3.425489 0.0104390024
#&gt;  8 -3.207482 0.0168955187
#&gt;  9 -2.989475 0.0260886455
#&gt; 10 -2.771468 0.0384900217
#&gt; # ... with 40 more rows</div><div class='input'><span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>discrete</span><span class='kw'>=</span><span class='fl'>TRUE</span>) <span class='co'># incorrect: x is a continuous RV</span></div><div class='output co'>#&gt; # A tibble: 100 x 2
#&gt;            x     y
#&gt;        &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 -2.176230  0.01
#&gt;  2 -2.119700  0.01
#&gt;  3 -1.867385  0.01
#&gt;  4 -1.865924  0.01
#&gt;  5 -1.850890  0.01
#&gt;  6 -1.800260  0.01
#&gt;  7 -1.781062  0.01
#&gt;  8 -1.642906  0.01
#&gt;  9 -1.468643  0.01
#&gt; 10 -1.425660  0.01
#&gt; # ... with 90 more rows</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>30</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>prob</span><span class='kw'>=</span><span class='fu'>sqrt</span>(<span class='fl'>10</span>:<span class='fl'>1</span>))
<span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>discrete</span><span class='kw'>=</span><span class='fl'>TRUE</span>) <span class='co'># discrete=T only needed if ambiguous</span></div><div class='output co'>#&gt; # A tibble: 9 x 2
#&gt;       x          y
#&gt;   &lt;dbl&gt;      &lt;dbl&gt;
#&gt; 1     1 0.16666667
#&gt; 2     2 0.10000000
#&gt; 3     3 0.13333333
#&gt; 4     4 0.03333333
#&gt; 5     5 0.16666667
#&gt; 6     6 0.13333333
#&gt; 7     7 0.13333333
#&gt; 8     8 0.06666667
#&gt; 9     9 0.06666667</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>:<span class='fl'>5</span>
<span class='no'>probs</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='fl'>0.1</span>, <span class='fl'>0.2</span>, <span class='fl'>0.3</span>, <span class='fl'>0.15</span>, <span class='fl'>0.25</span>)
<span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>y</span><span class='kw'>=</span><span class='no'>probs</span>) <span class='co'># discrete inferred from y</span></div><div class='output co'>#&gt; # A tibble: 5 x 2
#&gt;       x     y
#&gt;   &lt;int&gt; &lt;dbl&gt;
#&gt; 1     1  0.10
#&gt; 2     2  0.20
#&gt; 3     3  0.30
#&gt; 4     4  0.15
#&gt; 5     5  0.25</div><div class='input'><span class='fu'>attr</span>(<span class='no'>x</span>, <span class='st'>"probabilities"</span>) <span class='kw'>&lt;-</span> <span class='no'>probs</span>
<span class='fu'>rvtable</span>(<span class='no'>x</span>) <span class='co'># inferred from attributes (partial match 'prob')</span></div><div class='output co'>#&gt; # A tibble: 5 x 2
#&gt;       x     y
#&gt;   &lt;int&gt; &lt;dbl&gt;
#&gt; 1     1  0.10
#&gt; 2     2  0.20
#&gt; 3     3  0.30
#&gt; 4     4  0.15
#&gt; 5     5  0.25</div><div class='input'>
<span class='co'># an existing data frame or data table</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>Val</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>Prob</span><span class='kw'>=</span><span class='fl'>0.1</span>)
<span class='fu'>rvtable</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; # A tibble: 10 x 2
#&gt;      Val  Prob
#&gt;    &lt;int&gt; &lt;dbl&gt;
#&gt;  1     1   0.1
#&gt;  2     2   0.1
#&gt;  3     3   0.1
#&gt;  4     4   0.1
#&gt;  5     5   0.1
#&gt;  6     6   0.1
#&gt;  7     7   0.1
#&gt;  8     8   0.1
#&gt;  9     9   0.1
#&gt; 10    10   0.1</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>id</span><span class='kw'>=</span><span class='fu'>rep</span>(<span class='no'>LETTERS</span>[<span class='fl'>1</span>:<span class='fl'>2</span>], <span class='kw'>each</span><span class='kw'>=</span><span class='fl'>10</span>), <span class='kw'>v1</span><span class='kw'>=</span><span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='fl'>2</span>), <span class='kw'>p1</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fu'>rep</span>(<span class='fl'>0.1</span>, <span class='fl'>10</span>), <span class='fu'>sqrt</span>(<span class='fl'>1</span>:<span class='fl'>10</span>)))
<span class='fu'>rvtable</span>(<span class='no'>x</span>, <span class='kw'>Val</span><span class='kw'>=</span><span class='st'>"v1"</span>, <span class='kw'>Prob</span><span class='kw'>=</span><span class='st'>"p1"</span>)</div><div class='output co'>#&gt; # A tibble: 20 x 3
#&gt;        id    v1       p1
#&gt;    &lt;fctr&gt; &lt;int&gt;    &lt;dbl&gt;
#&gt;  1      A     1 0.100000
#&gt;  2      A     2 0.100000
#&gt;  3      A     3 0.100000
#&gt;  4      A     4 0.100000
#&gt;  5      A     5 0.100000
#&gt;  6      A     6 0.100000
#&gt;  7      A     7 0.100000
#&gt;  8      A     8 0.100000
#&gt;  9      A     9 0.100000
#&gt; 10      A    10 0.100000
#&gt; 11      B     1 1.000000
#&gt; 12      B     2 1.414214
#&gt; 13      B     3 1.732051
#&gt; 14      B     4 2.000000
#&gt; 15      B     5 2.236068
#&gt; 16      B     6 2.449490
#&gt; 17      B     7 2.645751
#&gt; 18      B     8 2.828427
#&gt; 19      B     9 3.000000
#&gt; 20      B    10 3.162278</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matthew Leonawicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
